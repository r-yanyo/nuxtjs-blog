{
  "title": "ブログを最適化する",
  "subtitle": "(1)gzipでコンテンツを圧縮する",
  "date": "2017年11月23日",
  "tags": [
    "blog"
  ],
  "bodyContent": "[dev.toと阿部寛のホームページどっちが速いですか？](http://kuxumarin.hatenablog.com/entry/2017/11/15/dev.to%E3%81%A8%E9%98%BF%E9%83%A8%E5%AF%9B%E3%81%AE%E3%83%9B%E3%83%BC%E3%83%A0%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%A9%E3%81%A3%E3%81%A1%E3%81%8C%E9%80%9F%E3%81%84%E3%81%A7%E3%81%99%E3%81%8B%EF%BC%9F)というめっちゃ面白い記事を見ました。\n\nその記事ではGoogleの[PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights/?hl=ja)というWebページを評価するためのツールを利用して、dev.toと阿部寛のホームページを比較しています。\n\nということでこのブログの評価を見てみます。\n\n\n<img src=\"/static/images/pageinsight-bef.png\">\n\n\nスコアは**41**と結構酷くなってしまいました。この記事を書くちょっと前に計測したときは90超えていたのに、記事やコードを増やしたら一気に悪くなってしまいました。(ちなみに阿部寛のホームページのスコアは92らしい）\n\nで、この[PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights/?hl=ja)はWebページが遅い原因も教えてくれて、このブログでは**コンテンツをgzip圧縮していないよ**とのことでした。コンテンツっていうのはHTMLとかJavaScriptとかCSSとか画像とか、とにかく全部です。\n\nこのブログのサーバサイドは[Express](http://expressjs.com/)で書かれていて、その[ドキュメント](http://expressjs.com/ja/advanced/best-practice-performance.html)を見ると、以下のようにしてgzip圧縮をしたコンテンツを送信してくれるそうです。\n```js\nvar compression = require('compression');\nvar express = require('express');\nvar app = express();\napp.use(compression());\n```\nで、実際にやってみると、\n\n\n<img src=\"/static/images/pageinsight-aft.png\">\n\n\nとなり、スコアは**92**まで上昇しました。他にも遅い原因として**キャッシュを利用していない**ことが分かったので、それは後で解決します。たぶん。",
  "bodyHtml": "<p><a href=\"http://kuxumarin.hatenablog.com/entry/2017/11/15/dev.to%E3%81%A8%E9%98%BF%E9%83%A8%E5%AF%9B%E3%81%AE%E3%83%9B%E3%83%BC%E3%83%A0%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%A9%E3%81%A3%E3%81%A1%E3%81%8C%E9%80%9F%E3%81%84%E3%81%A7%E3%81%99%E3%81%8B%EF%BC%9F\">dev.toと阿部寛のホームページどっちが速いですか？</a>というめっちゃ面白い記事を見ました。</p>\n<p>その記事ではGoogleの<a href=\"https://developers.google.com/speed/pagespeed/insights/?hl=ja\">PageSpeed Insights</a>というWebページを評価するためのツールを利用して、dev.toと阿部寛のホームページを比較しています。</p>\n<p>ということでこのブログの評価を見てみます。</p>\n<p>&lt;img src=&quot;/static/images/pageinsight-bef.png&quot;&gt;</p>\n<p>スコアは<strong>41</strong>と結構酷くなってしまいました。この記事を書くちょっと前に計測したときは90超えていたのに、記事やコードを増やしたら一気に悪くなってしまいました。(ちなみに阿部寛のホームページのスコアは92らしい）</p>\n<p>で、この<a href=\"https://developers.google.com/speed/pagespeed/insights/?hl=ja\">PageSpeed Insights</a>はWebページが遅い原因も教えてくれて、このブログでは<strong>コンテンツをgzip圧縮していないよ</strong>とのことでした。コンテンツっていうのはHTMLとかJavaScriptとかCSSとか画像とか、とにかく全部です。</p>\n<p>このブログのサーバサイドは<a href=\"http://expressjs.com/\">Express</a>で書かれていて、その<a href=\"http://expressjs.com/ja/advanced/best-practice-performance.html\">ドキュメント</a>を見ると、以下のようにしてgzip圧縮をしたコンテンツを送信してくれるそうです。</p>\n<pre><code class=\"hljs\"><span class=\"hljs-keyword\">var</span> compression = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'compression'</span>);\n<span class=\"hljs-keyword\">var</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'express'</span>);\n<span class=\"hljs-keyword\">var</span> app = express();\napp.use(compression());</code></pre><p>で、実際にやってみると、</p>\n<p>&lt;img src=&quot;/static/images/pageinsight-aft.png&quot;&gt;</p>\n<p>となり、スコアは<strong>92</strong>まで上昇しました。他にも遅い原因として<strong>キャッシュを利用していない</strong>ことが分かったので、それは後で解決します。たぶん。</p>\n",
  "dir": "content/json",
  "base": "2017-11-23-gzip-compression.json",
  "ext": ".json",
  "sourceBase": "2017-11-23-gzip-compression.md",
  "sourceExt": ".md"
}